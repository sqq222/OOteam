{% load static %}
{% load admin_filter %}

<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.6
Version: 4.5.3
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
    <!--<![endif]-->
    <!-- BEGIN HEAD -->

    <head>
        <meta charset="utf-8" />
        <title>星球科学家 | 用户数据 - 新增玩家</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta content="" name="description" />
        <meta content="" name="author" />
        <!-- BEGIN GLOBAL MANDATORY STYLES -->
        <link href="{% static 'admin/css/font.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/uniform.default.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END GLOBAL MANDATORY STYLES -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link href="{% static 'admin/css/daterangepicker.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/morris.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/fullcalendar.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL STYLES -->
        <link href="{% static 'admin/css/components-md.min.css' %}" rel="stylesheet" id="style_components" type="text/css" />
        <link href="{% static 'admin/css/plugins-md.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME GLOBAL STYLES -->
        <!-- BEGIN THEME LAYOUT STYLES -->
        <link href="{% static 'admin/css/layout.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'admin/css/darkblue.min.css' %}" rel="stylesheet" type="text/css" id="style_color" />
        <link href="{% static 'admin/css/custom.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME LAYOUT STYLES -->
        <link rel="shortcut icon" href="favicon.ico" /> </head>
    <!-- END HEAD -->

    <body class="page-header-fixed page-sidebar-closed-hide-logo page-content-white page-md">
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
            <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="index.html">
                        {# <img src="{% static 'admin/img/logo.png' %}" alt="logo" class="logo-default" />  #}</a>
                    <div class="menu-toggler sidebar-toggler"> </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN TOP NAVIGATION MENU -->
                <div class="top-menu">
                    <ul class="nav navbar-nav pull-right">
                        <!-- BEGIN NOTIFICATION DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

                        <!-- END NOTIFICATION DROPDOWN -->
                        <!-- BEGIN INBOX DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

                        <!-- END INBOX DROPDOWN -->
                        <!-- BEGIN TODO DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->

                        <!-- END TODO DROPDOWN -->
                        <!-- BEGIN USER LOGIN DROPDOWN -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <li class="dropdown dropdown-user">
                            <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                <span class="username username-hide-on-mobile"> {{ request.user.get_full_name }} </span>
                                <i class="fa fa-angle-down"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-default">
                                <li>
                                    <a href="page_user_profile_1.html">
                                        <i class="icon-user"></i> 我的资料 </a>
                                </li>
                                <li class="divider"> </li>
                                <li>
                                    <a href="/admin/lock/">
                                        <i class="icon-lock"></i> 锁屏 </a>
                                </li>
                                <li>
                                    <a  data-toggle="modal" data-target="#myModal">
                                        <i class="icon-key"></i> 注销 </a>
                                </li>
                            </ul>
                        </li>
                        <!-- END USER LOGIN DROPDOWN -->
                        <!-- BEGIN QUICK SIDEBAR TOGGLER -->
                        <!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
                        <!-- END QUICK SIDEBAR TOGGLER -->
                    </ul>
                </div>
                <!-- END TOP NAVIGATION MENU -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"> </div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            {% include 'admin/sidebar.html' %}
            <!-- END SIDEBAR -->
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content">
                    <!-- BEGIN PAGE HEADER-->
                    <!-- BEGIN THEME PANEL -->

                    <!-- END THEME PANEL -->
                    <!-- BEGIN PAGE BAR -->
                    <div class="page-bar">
                        <ul class="page-breadcrumb">
                            <li>
                                <a href="/admin/">首页</a>
                                <i class="fa fa-circle"></i>
                            </li>
                            <li>
                                <a href="#">用户数据</a>
                                <i class="fa fa-circle"></i>
                            </li>
                            <li>
                                <a>基本情况</a>
                            </li>
                        </ul>

                    </div>
                    <!-- END PAGE BAR -->
                    <!-- BEGIN PAGE TITLE-->
                    <h3 class="page-title"> 控制台
                        <small>控制台 & 统计</small>
                    </h3>
                    <!-- END PAGE TITLE-->
                    <!-- END PAGE HEADER-->
                    <!-- BEGIN DASHBOARD STATS 1-->

                    <div class="clearfix"></div>
                    <!-- END DASHBOARD STATS 1-->


                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-cursor font-purple"></i>
                                        <span class="caption-subject font-purple bold uppercase">地区统计</span>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                   <div class="tabbable tabbable-tabdrop">
                                        <ul class="nav nav-tabs">
                                            <li class="dropdown pull-right tabdrop">


                                            </li>
                                            <li class="active">
                                                <a href="#player_add_daily" data-toggle="tab" aria-expanded="true">按日</a>
                                            </li>
                                            <li class="">
                                                <a href="#player_add_week" data-toggle="tab" aria-expanded="true">按周</a>
                                            </li>
                                            <li>
                                                <a href="#player_add_month" data-toggle="tab" aria-expanded="true">按月</a>
                                            </li>


                                        </ul>
                                        <div class="tab-content">
                                            <div class="tab-pane active" id="player_add_daily" style="width:100%;height:620px;">

                                            </div>
                                            <div class="tab-pane active" id="player_add_week" style="width:100%;height:620px;">

                                            </div>
                                            <div class="tab-pane active" id="player_add_month" style="width:100%;height:620px;">

                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                     <div class="row">

                        <div class="col-md-12 col-sm-12">
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-cursor font-purple"></i>
                                        <span class="caption-subject font-purple bold uppercase">性别统计</span>
                                    </div>
                                </div>
                                <div class="portlet-body" id="sex_stat" style="width:100%;height:620px;">

                                </div>

                            </div>
                        </div>
                        <div class="row">

                        <div class="col-md-12 col-sm-12">
                            <div class="portlet light bordered">
                                <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-cursor font-purple"></i>
                                        <span class="caption-subject font-purple bold uppercase">年龄统计</span>
                                    </div>
                                </div>
                                <div class="portlet-body" id="age_stat" style="width:100%;height:620px;">

                                </div>

                            </div>
                        </div>


                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->

        </div>
        <!-- END CONTAINER -->
        <!-- BEGIN FOOTER -->
        <div class="page-footer">
            <div class="page-footer-inner"> 2017 &copy; Loki Dig.

            </div>
            <div class="scroll-to-top">
                <i class="icon-arrow-up"></i>
            </div>
        </div>
        <!-- END FOOTER -->

        {% include 'admin/modal_logout.html' %}
        <!--[if lt IE 9]>
<script src="../assets/global/plugins/respond.min.js"></script>
<script src="../assets/global/plugins/excanvas.min.js"></script>
<![endif]-->
        <!-- BEGIN CORE PLUGINS -->
        <script src="{% static 'admin/js/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/bootstrap.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/js.cookie.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.blockui.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.uniform.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'admin/js/moment.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/daterangepicker.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/morris.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/raphael-min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.waypoints.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.counterup.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/amcharts.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/serial.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/pie.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/radar.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/light.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/patterns.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/chalk.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/ammap.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/worldLow.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/amstock.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/fullcalendar.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.flot.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.flot.resize.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.flot.categories.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.easypiechart.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/jquery.sparkline.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="{% static 'admin/js/app.min.js' %}" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{% static 'admin/js/dashboard.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="{% static 'admin/js/layout.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/demo.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/quick-sidebar.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/echarts.js' %}" type="text/javascript"></script>
        <script src="{% static 'admin/js/china.js' %}" type="text/javascript"></script>
        <!-- END THEME LAYOUT SCRIPTS -->

        <script type="text/javascript">
        var player_add_daily = echarts.init(document.getElementById('player_add_daily'))
        var player_add_month = echarts.init(document.getElementById('player_add_month'))
        var player_add_week = echarts.init(document.getElementById('player_add_week'))
        /**
 * author: bingo
 * email: guobin@ebigdata.org
 * date: 2016-12-21
 * version: V1.0
 * description: 季度GDP总值趋势图，针对需求x轴最右边显示最新的季度，并且显示每年的这个季度，同时要显示和隐藏数据。主要解决了两个问题，第一是echarts默认显示x轴第一个数据，通过设置inverse: true让数据和x轴的反转来实现，第二是数据的显示和隐藏，通过labelTag的值来实现
 */
var labelTag = true;
var resultdailyData = {
    "times": [
    {% for r in daily_user %}
        '{{r.0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "add_user": [
    {% for r in daily_user %}
        '{{r.1}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "per": [
    {% for r in daily_user %}
        '{{daily_user|getDailyAddedPer:forloop.counter0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ]
};

var resultmonthData = {
    "times": [
    {% for r in month_user %}
        '{{r.0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "add_user": [
    {% for r in month_user %}
        '{{r.1}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "per": [
    {% for r in month_user %}
        '{{month_user|getDailyAddedPer:forloop.counter0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ]
};

var resultweekData = {
    "times": [
    {% for r in week_user %}
        '{{r.0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "add_user": [
    {% for r in week_user %}
        '{{r.1}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ],
    "per": [
    {% for r in week_user %}
        '{{week_user|getDailyAddedPer:forloop.counter0}}'
        {% if not forloop.last %}, {% endif %}

    {% endfor%}
    ]
};

function label() {
    if (labelTag) {
        return {
            normal: {
                show: true,
                position: 'left',
                formatter: function(param) {
                    return parseFloat(param.value).toFixed(2) + '%'
                },
            }
        }
    } else {
        return {
            normal: {
                show: false
            }
        }
    }

}

function label2() {
    if (labelTag) {
        return {
            normal: {
                show: true,
                formatter: function(param) {
                    return param.value
                },
                position: 'top'
            }
        }
    } else {
        return {
            normal: {
                show: false
            }
        }
    }

}

function dailyxAxis() {
    return [{
        type: 'category',
        // axisLabel: {
        //     interval: 3
        // },

        // inverse: true,
        data: resultdailyData.times
    }]
}

function monthxAxis() {
    return [{
        type: 'category',
        // axisLabel: {
        //     interval: 3
        // },

        // inverse: true,
        data: resultmonthData.times
    }]
}

function weekxAxis() {
    return [{
        type: 'category',
        // axisLabel: {
        //     interval: 3
        // },

        // inverse: true,
        data: resultweekData.times
    }]
}

daily_option = {
    title: [{
        text: "每日新增用户统计",
        left: 'center',
        textStyle: {
            color: "#454545",
            fontSize: 16,
            fontWeight: 'bold'
        }
    }, {
        text: '单位：个',
        right: 10,
        textStyle: {
            color: "#006486",
            fontSize: 12,
            fontWeight: 'normal'
        }
    }],
    tooltip: {
        trigger: 'axis',
        formatter: function(params) {
            console.log(params)
            return params[0].name + '<br/>' + params[0].seriesName + ': ' + parseFloat(params[0].value).toFixed(2) +  '%' + '<br/>' + params[1].seriesName + ': ' + params[1].value
        }
    },
    legend: {
        data: ['增长率', '新增用户'],
        selectedMode: true,
        bottom: 'bottom'
    },

    xAxis: dailyxAxis(),
    yAxis: [{
            type: 'value',
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            min: -100,

            axisLabel: {
                formatter: '{value}%'
            }
        }, {
            type: 'value',
            splitLine: {
                show: false,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            // interval: 1000,
            axisLabel: {
                formatter: '{value}'
            }
        }],
        "dataZoom": [{
            "show": true,
            "height": 30,
            "xAxisIndex": [
                0
            ],
            bottom: 30,
            "start": 0,
            "end": 100,
            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
            handleSize: '110%',
            handleStyle:{
                color:"#d3dee5",

            },
               textStyle:{
                color:"#fff"},
               borderColor:"#90979c"


        }, {
            "type": "inside",
            "show": true,
            "height": 15,
            "start": 1,
            "end": 35
        }],
        series: [{
            showAllSymbol: true, //当使用interval隔断时，显示所有的数据
            name: '增长率',
            type: 'line',
            label: label(),
            data: resultdailyData.per,
             lineStyle: {
                    normal: {
                        width: 3,
                        shadowColor: 'rgba(0,0,0,0.4)',
                        shadowBlur: 10,
                        shadowOffsetY: 10
                    }
                },
        }, {
            name: '新增用户',
            type: 'bar',
            barMaxWidth: '30px',
            label: label2(),
            yAxisIndex: 1,
            data: resultdailyData.add_user
        }]
    }


month_option = {
    title: [{
        text: "每月新增用户统计",
        left: 'center',
        textStyle: {
            color: "#454545",
            fontSize: 16,
            fontWeight: 'bold'
        }
    }, {
        text: '单位：个',
        right: 10,
        textStyle: {
            color: "#006486",
            fontSize: 12,
            fontWeight: 'normal'
        }
    }],
    tooltip: {
        trigger: 'axis',
        formatter: function(params) {
            console.log(params)
            return params[0].name + '<br/>' + params[0].seriesName + ': ' + params[0].value +  '%' + '<br/>' + params[1].seriesName + ': ' + params[1].value
        }
    },
    legend: {
        data: ['增长率', '新增用户'],
        selectedMode: true,
        bottom: 'bottom'
    },

    xAxis: monthxAxis(),
    yAxis: [{
            type: 'value',
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            min: -100,

            axisLabel: {
                formatter: '{value}%'
            }
        }, {
            type: 'value',
            splitLine: {
                show: false,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            // interval: 1000,
            axisLabel: {
                formatter: '{value}'
            }
        }],
        "dataZoom": [{
            "show": true,
            "height": 30,
            "xAxisIndex": [
                0
            ],
            bottom: 30,
            "start": 0,
            "end": 100,
            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
            handleSize: '110%',
            handleStyle:{
                color:"#d3dee5",

            },
               textStyle:{
                color:"#fff"},
               borderColor:"#90979c"


        }, {
            "type": "inside",
            "show": true,
            "height": 15,
            "start": 1,
            "end": 35
        }],
        series: [{
            showAllSymbol: true, //当使用interval隔断时，显示所有的数据
            name: '增长率',
            type: 'line',
            label: label(),
            data: resultmonthData.per,
             lineStyle: {
                    normal: {
                        width: 3,
                        shadowColor: 'rgba(0,0,0,0.4)',
                        shadowBlur: 10,
                        shadowOffsetY: 10
                    }
                },
        }, {
            name: '新增用户',
            type: 'bar',
            barMaxWidth: '30px',
            label: label2(),
            yAxisIndex: 1,
            data: resultmonthData.add_user
        }]
    }

week_option = {
    title: [{
        text: "每周新增用户统计",
        left: 'center',
        textStyle: {
            color: "#454545",
            fontSize: 16,
            fontWeight: 'bold'
        }
    }, {
        text: '单位：个',
        right: 10,
        textStyle: {
            color: "#006486",
            fontSize: 12,
            fontWeight: 'normal'
        }
    }],
    tooltip: {
        trigger: 'axis',
        formatter: function(params) {
            console.log(params)
            123123
            return params[0].name + '<br/>' + params[0].seriesName + ': ' + params[0].value +  '%' + '<br/>' + params[1].seriesName + ': ' + params[1].value
        }
    },
    legend: {
        data: ['增长率', '新增用户'],
        selectedMode: true,
        bottom: 'bottom'
    },

    xAxis: weekxAxis(),
    yAxis: [{
            type: 'value',
            splitLine: {
                show: true,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            min: -100,

            axisLabel: {
                formatter: '{value}%'
            }
        }, {
            type: 'value',
            splitLine: {
                show: false,
                lineStyle: {
                    color: '#006486',
                    width: 1,
                    type: 'dashed'
                }
            },
            // interval: 1000,
            axisLabel: {
                formatter: '{value}'
            }
        }],
        "dataZoom": [{
            "show": true,
            "height": 30,
            "xAxisIndex": [
                0
            ],
            bottom: 30,
            "start": 0,
            "end": 100,
            handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
            handleSize: '110%',
            handleStyle:{
                color:"#d3dee5",

            },
               textStyle:{
                color:"#fff"},
               borderColor:"#90979c"


        }, {
            "type": "inside",
            "show": true,
            "height": 15,
            "start": 1,
            "end": 35
        }],
        series: [{
            showAllSymbol: true, //当使用interval隔断时，显示所有的数据
            name: '增长率',
            type: 'line',
            label: label(),
            data: resultweekData.per,
             lineStyle: {
                    normal: {
                        width: 3,
                        shadowColor: 'rgba(0,0,0,0.4)',
                        shadowBlur: 10,
                        shadowOffsetY: 10
                    }
                },
        }, {
            name: '新增用户',
            type: 'bar',
            barMaxWidth: '30px',
            label: label2(),
            yAxisIndex: 1,
            data: resultweekData.add_user
        }]
    }
player_add_daily.setOption(daily_option);
player_add_month.setOption(month_option);
player_add_week.setOption(week_option);



// myChart.setOption(option);



// function renderBrushed(params) {
//     var mainSeries = params.batch[0].selected[0];

//     var selectedItems = [];
//     var categoryData = [];
//     var barData = [];
//     var maxBar = 30;
//     var sum = 0;
//     var count = 0;

//     for (var i = 0; i < mainSeries.dataIndex.length; i++) {
//         var rawIndex = mainSeries.dataIndex[i];
//         var dataItem = convertedData[0][rawIndex];
//         var pmValue = dataItem.value[2];

//         sum += pmValue;
//         count++;

//         selectedItems.push(dataItem);
//     }

//     selectedItems.sort(function (a, b) {
//         return a.value[2] - b.value[2];
//     });

//     for (var i = 0; i < Math.min(selectedItems.length, maxBar); i++) {
//         categoryData.push(selectedItems[i].name);
//         barData.push(selectedItems[i].value[2]);
//     }

//     this.setOption({
//         yAxis: {
//             data: categoryData
//         },
//         xAxis: {
//             axisLabel: {show: !!count}
//         },
//         title: {
//             id: 'statistic',
//             text: count ? '平均: ' + (sum / count).toFixed(4) : ''
//         },
//         series: {
//             id: 'bar',
//             data: barData
//         }
//     });
// }
var sex_stat = echarts.init(document.getElementById('sex_stat'))

sex_option = {
    title: {
        text: '用户性别增长趋势',
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['女性','男性']
    },
    toolbox: {
        show: true,
        feature: {
            dataZoom: {},
            dataView: {readOnly: false},
            magicType: {type: ['line', 'bar']},
            restore: {},
            saveAsImage: {}
        }
    },
    xAxis:  {
        type: 'category',
        boundaryGap: false,
        data: [{% for r in maledailyrow %} '{{r.0}}'{% if not forloop.last %}, {% endif %} {% endfor %}]
    },
    yAxis: {
        type: 'value',
        axisLabel: {
            formatter: '{value}'
        }
    },
    series: [
        {
            name:'女性',
            type:'line',
            data:[{% for r in femaledailyrow %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'男性',
            type:'line',
            data:[{% for r in maledailyrow %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        }
    ]
};
sex_stat.setOption(sex_option);

var age_stat = echarts.init(document.getElementById('age_stat'))

age_option = {
    title: {
        text: '用户年龄增长趋势',
    },
    tooltip: {
        trigger: 'axis'
    },
    legend: {
        data:['6岁以下','7-8岁','9-10岁','10-12岁','13岁以上']
    },
    toolbox: {
        show: true,
        feature: {
            dataZoom: {},
            dataView: {readOnly: false},
            magicType: {type: ['line', 'bar']},
            restore: {},
            saveAsImage: {}
        }
    },
    xAxis:  {
        type: 'category',
        boundaryGap: false,
        data: [{% for r in less_sixdailyrow %} '{{r.0}}'{% if not forloop.last %}, {% endif %} {% endfor %}]
    },
    yAxis: {
        type: 'value',
        axisLabel: {
            formatter: '{value}'
        }
    },
    series: [
        {
            name:'6岁以下',
            type:'line',
            data:[{% for r in less_sixdailyrow %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'7-9岁',
            type:'line',
            data:[{% for r in bet_seven_eight_stat %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'9-10岁',
            type:'line',
            data:[{% for r in bet_nine_ten_stat %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'10-12岁',
            type:'line',
            data:[{% for r in bet_ten_twelve_stat %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        },
        {
            name:'13岁以上',
            type:'line',
            data:[{% for r in less_thridteen_stat %} {{r.1}}{% if not forloop.last %}, {% endif %} {% endfor %}],
            markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
            markLine: {
                data: [
                    {type: 'average', name: '平均值'}
                ]
            }
        }
    ]
};
age_stat.setOption(age_option);
$("#player_add_week").removeClass('active')
$("#player_add_month").removeClass('active')
        </script>
    </body>

</html>